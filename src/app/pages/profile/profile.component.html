<!-- <p-toast></p-toast> -->

<div
  fxLayout="column"
  fxLayoutGap="3%"
  style="width: 100%; height: 100%; padding: 2% 2% 2% 2%"
>
  <app-navbar></app-navbar>

  <div class="page-title">Welcome {{ user.fullName }}.</div>

  <mat-card class="beige-block">
    <form #updateForm="ngForm" (ngSubmit)="closeProfileEdit(updateForm)">
      <mat-card-group fxLayoutAlign="center center" fxLayout="column">
        <mat-card-title> My Profile</mat-card-title>
        <div mat-card-avatar class="profile-image"></div>
      </mat-card-group>

      <mat-card-group
        class="basic-info-wrap"
        fxLayout="column"
        fxLayoutGap="2%"
      >
        <h2 style="text-decoration: underline; align-self: flex-start">
          Basic Information
        </h2>

        <div fxLayout="row" fxLayoutAlign="space-between stretch" [ngClass]="{
            editProfileDetails: editDetailsMode,
            viewProfileDetails: !editDetailsMode
          }"
        >
          <div fxLayout="column" fxLayoutAlign="flex-start" fxLayoutGap="5%">
            <label for="fullName">Name</label>

            <span *ngIf="!editDetailsMode">{{ user.fullName }}</span>
            <input pInputText ngNativeValidate required *ngIf="editDetailsMode" class="inputField"
              [(ngModel)]="user.fullName" name="fullName" id="fullName" #fullName="ngModel" />
          </div>

          <div fxLayout="column" fxLayoutAlign="flex-start" fxLayoutGap="5%">
            <label for="email">Email</label>

            <span>{{ user.email }}</span>
          </div>

          <div fxLayout="column" fxLayoutAlign="flex-start" fxLayoutGap="5%">
            <label for="contactNumber">Contact</label>

            <span *ngIf="!editDetailsMode">{{ user.contactNumber }}</span>
            <input pInputText ngNativeValidate required *ngIf="editDetailsMode" class="inputField"
              [(ngModel)]="user.contactNumber" name="contactNumber" id="contactNumber" #contactNumber="ngModel" />
          </div>
        </div>

      <div class="profile-btn-wrap" fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="5%">
        <button mat-button class="grey-btn" *ngIf="!editDetailsMode" (click)="openDialog()">
          Change password
        </button>
        <button mat-button class="grey-btn" (click)="editDetailsMode = true" *ngIf="!editDetailsMode">
          Edit Profile
        </button>
        <button mat-button class="grey-btn" type="submit" *ngIf="editDetailsMode" (click)="editDetails()">
          Save Changes
        </button>
      </div>

      </mat-card-group>

      <div class="profile-btn-wrap" fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="5%">
        <button mat-button class="grey-btn" *ngIf="!editDetailsMode">
          Change password
        </button>
        <button
          mat-button
          class="grey-btn"
          (click)="editDetailsMode = true"
          *ngIf="!editDetailsMode"
        >
          Edit Profile
        </button>
        <button mat-button class="grey-btn" (click)="editDetails()" *ngIf="editDetailsMode">
          Save Changes
        </button>

      </div>
    </form>

    <mat-card-group class="covid-info-wrap" fxLayout="column" fxLayoutGap="2%">
      <h2 style="text-decoration: underline; align-self: flex-start">
        Covid Related Information
      </h2>

      <div fxLayout="row" fxLayoutAlign="space-between stretch" fxLayoutGap="45%">
        <div fxLayout="column" fxLayoutAlign="flex-start" fxLayoutGap="5%">
          <label for="name">Vaccination Status</label>

          <span>isVaccinated</span>
        </div>

        <div fxLayout="column" fxLayoutAlign="flex-start" fxLayoutGap="5%">
          <label for="name">WFH Productivity Status</label>

          <span>Test</span>
        </div>
      </div>
      <div fxLayout="row" fxLayoutAlign="space-between stretch" fxLayoutGap="45%">
        <div fxLayout="column" fxLayoutAlign="flex-start" fxLayoutGap="5%" *ngIf="hasWFOMonthlyCap">
          <label for="name">WFO Monthly Cap</label>

          <span>{{ user.wfoMonthlyAllocation }}</span>
        </div>

        <div fxLayout="column" fxLayoutAlign="flex-start" fxLayoutGap="5%" *ngIf="hasWFOTeam">
          <label for="name">WFO Team</label>

          <span>{{ user.alternateWfoTeam }}</span>
        </div>
      </div>
    </mat-card-group>
    <mat-card-group class="work-info-wrap" fxLayout="column" fxLayoutGap="5%">
      <h2 style="text-decoration: underline; align-self: flex-start">
        Work Related Information
      </h2>

      <div fxLayout="row" fxLayoutAlign="space-between stretch" fxLayoutGap="25%">
        <div fxLayout="column" fxLayoutAlign="flex-start" fxLayoutGap="5%">
          <label for="name">Position</label>

          <span>{{ user.position }}</span>
        </div>

        <div fxLayout="column" fxLayoutAlign="flex-start" fxLayoutGap="5%">
          <label for="name">In-charge of</label>

          <span>{{ user.mdept }}</span>
        </div>

        <div fxLayout="column" fxLayoutAlign="flex-start" fxLayoutGap="5%">
          <label for="name">Part of</label>

          <span>{{ user.dept }}</span>
        </div>
      </div>
    </mat-card-group>
  </mat-card>
</div>
